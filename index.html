<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Test Cruise Finder</title>
</head>
<body>
<h1>Test Cruise Finder</h1>

<label>Audience:
  <select id="audience">
    <option value="Family">Family</option>
    <option value="Adult">Adult</option>
  </select>
</label>

<label>Budget:
  <select id="budget">
    <option value="low">Low</option>
    <option value="mid">Mid</option>
  </select>
</label>

<label>Region:
  <select id="region">
    <option value="Caribbean">Caribbean</option>
    <option value="Mediterranean">Mediterranean</option>
  </select>
</label>

<button id="findShips">Find Ships</button>

<table id="results-table">
  <thead>
    <tr><th>Ship Name</th><th>Score</th></tr>
  </thead>
  <tbody></tbody>
</table>

<script>
console.log("Script loaded"); // <-- confirms script is running

const data = [
  {name:"Carnival Sunshine", scores:{Family:1, Luxury:0.2}, deployment:["Caribbean"]},
  {name:"MSC Meraviglia", scores:{Family:0.8, Luxury:0.5}, deployment:["Caribbean","Mediterranean"]}
];

function findShips(data,user){
  const results = data.filter(ship=>ship.deployment.includes(user.region));
  const tbody = document.querySelector("#results-table tbody");
  tbody.innerHTML="";
  results.forEach(ship=>{
    const tr = document.createElement("tr");
    tr.innerHTML=`<td>${ship.name}</td><td>${Math.floor(ship.scores.Family*100)}</td>`;
    tbody.appendChild(tr);
  });
}

document.getElementById("findShips").addEventListener("click",()=>{
  console.log("Button clicked!");
  const user = {
    audience: document.getElementById("audience").value,
    budget: document.getElementById("budget").value,
    region: document.getElementById("region").value
  };
  console.log("User selection:", user);
  findShips(data,user);
});
</script>
</body>
</html>
